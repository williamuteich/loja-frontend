<div class="p-12 md:p-24">
    <div class="w-full space-y-6" [formGroup]="settingsForm">

        <div class="space-y-4">
            @if (saveSuccess()) {
            <div
                class="flex items-center gap-2 p-4 rounded-xl bg-emerald-50 border border-emerald-200 text-emerald-700 animate-in fade-in slide-in-from-top-2 duration-300">
                <lucide-icon [img]="CheckCircle2" class="w-5 h-5"></lucide-icon>
                <span class="text-sm font-medium">Configurações salvas com sucesso!</span>
            </div>
            }

            @if (saveError()) {
            <div
                class="flex items-center gap-2 p-4 rounded-xl bg-rose-50 border border-rose-200 text-rose-700 animate-in fade-in slide-in-from-top-2 duration-300">
                <lucide-icon [img]="AlertCircle" class="w-5 h-5"></lucide-icon>
                <span class="text-sm font-medium">{{ saveError() }}</span>
            </div>
            }
        </div>

        @if (isLoading()) {
        <div
            class="flex flex-col items-center justify-center p-24 space-y-4 bg-white rounded-xl border border-slate-200">
            <lucide-icon [img]="Loader2" class="w-8 h-8 text-primary animate-spin"></lucide-icon>
            <p class="text-slate-500 font-medium">Carregando configurações...</p>
        </div>
        } @else {

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-6 border-b border-slate-200 flex items-center gap-3 bg-gray-800">
                <div class="w-10 h-10 rounded-lg bg-rose-100 flex items-center justify-center">
                    <lucide-icon [img]="Power" class="w-5 h-5 text-rose-600"></lucide-icon>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-white">Controle do Site</h2>
                    <p class="text-sm text-white">Status e manutenção</p>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                    <div>
                        <label class="text-sm font-medium leading-none cursor-pointer"
                            (click)="toggleSwitch('isActive')">Site Ativo</label>
                        <p class="text-sm text-slate-500">Desative para ocultar a loja publicamente</p>
                    </div>
                    <button type="button" role="switch" [attr.aria-checked]="settingsForm.get('isActive')?.value"
                        (click)="toggleSwitch('isActive')"
                        [attr.data-state]="settingsForm.get('isActive')?.value ? 'checked' : 'unchecked'"
                        class="peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-emerald-500 data-[state=unchecked]:bg-slate-200">
                        <span [attr.data-state]="settingsForm.get('isActive')?.value ? 'checked' : 'unchecked'"
                            class="pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"></span>
                    </button>
                </div>
                <div class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                    <div>
                        <label class="text-sm font-medium leading-none cursor-pointer"
                            (click)="toggleSwitch('maintenanceMode')">Modo Manutenção</label>
                        <p class="text-sm text-slate-500">Exibe uma tela de manutenção para os visitantes</p>
                    </div>
                    <button type="button" role="switch" [attr.aria-checked]="settingsForm.get('maintenanceMode')?.value"
                        (click)="toggleSwitch('maintenanceMode')"
                        [attr.data-state]="settingsForm.get('maintenanceMode')?.value ? 'checked' : 'unchecked'"
                        class="peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-amber-500 data-[state=unchecked]:bg-slate-200">
                        <span [attr.data-state]="settingsForm.get('maintenanceMode')?.value ? 'checked' : 'unchecked'"
                            class="pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"></span>
                    </button>
                </div>
                <div class="space-y-2 animate-in fade-in duration-300"
                    *ngIf="settingsForm.get('maintenanceMode')?.value">
                    <label class="text-sm font-medium leading-none">Mensagem de Manutenção</label>
                    <textarea
                        class="flex min-h-[80px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        rows="3" formControlName="maintenanceMessage" placeholder="Estamos em manutenção..."></textarea>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-6 border-b border-slate-200 flex items-center gap-3 bg-gray-800">
                <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center">
                    <lucide-icon [img]="Store" class="w-5 h-5 text-blue-600"></lucide-icon>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-white">Informações da Loja</h2>
                    <p class="text-sm text-white">Dados básicos e endereço</p>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">Nome da Loja</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                            formControlName="storeName">
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">CNPJ</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                            formControlName="cnpj">
                    </div>
                </div>
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Descrição</label>
                    <textarea
                        class="flex min-h-[80px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        rows="3" formControlName="description"></textarea>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">Telefone</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                            formControlName="phone">
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">WhatsApp</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                            formControlName="whatsapp">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">Endereço</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                            formControlName="address">
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">CEP</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                            formControlName="zipCode">
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">Cidade</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                            formControlName="city">
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none Estado">Estado</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                            formControlName="state">
                    </div>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-6 border-b border-slate-200 flex items-center gap-3 bg-gray-800">
                <div class="w-10 h-10 rounded-lg bg-indigo-100 flex items-center justify-center">
                    <lucide-icon [img]="Image" class="w-5 h-5 text-indigo-600"></lucide-icon>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-white">Identidade Visual</h2>
                    <p class="text-sm text-white">URLs de imagens</p>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Logo URL</label>
                    <input
                        class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        formControlName="logoUrl" placeholder="https://...">
                </div>
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Favicon URL</label>
                    <input
                        class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        formControlName="faviconUrl" placeholder="https://...">
                </div>
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Open Graph Image URL</label>
                    <input
                        class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        formControlName="ogImageUrl" placeholder="https://...">
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-6 border-b border-slate-200 flex items-center gap-3 bg-gray-800">
                <div class="w-10 h-10 rounded-lg bg-blue-100 flex items-center justify-center">
                    <lucide-icon [img]="Mail" class="w-5 h-5 text-blue-600"></lucide-icon>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-white">Configurações de Email</h2>
                    <p class="text-sm text-white">Emails de notificação</p>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Email de Contato</label>
                    <input
                        class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        formControlName="contactEmail">
                </div>
                <div class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                    <div>
                        <label class="text-sm font-medium leading-none cursor-pointer"
                            (click)="toggleSwitch('notifyNewOrders')">Notificar novos pedidos</label>
                        <p class="text-sm text-slate-500">Receber email quando houver novo pedido</p>
                    </div>
                    <button type="button" role="switch" [attr.aria-checked]="settingsForm.get('notifyNewOrders')?.value"
                        (click)="toggleSwitch('notifyNewOrders')"
                        [attr.data-state]="settingsForm.get('notifyNewOrders')?.value ? 'checked' : 'unchecked'"
                        class="peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-slate-200">
                        <span [attr.data-state]="settingsForm.get('notifyNewOrders')?.value ? 'checked' : 'unchecked'"
                            class="pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"></span>
                    </button>
                </div>
                <div class="flex items-center justify-between p-4 bg-slate-50 rounded-lg">
                    <div>
                        <label class="text-sm font-medium leading-none cursor-pointer"
                            (click)="toggleSwitch('automaticNewsletter')">Newsletter automática</label>
                        <p class="text-sm text-slate-500">Enviar promoções automaticamente</p>
                    </div>
                    <button type="button" role="switch"
                        [attr.aria-checked]="settingsForm.get('automaticNewsletter')?.value"
                        (click)="toggleSwitch('automaticNewsletter')"
                        [attr.data-state]="settingsForm.get('automaticNewsletter')?.value ? 'checked' : 'unchecked'"
                        class="peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-slate-200">
                        <span
                            [attr.data-state]="settingsForm.get('automaticNewsletter')?.value ? 'checked' : 'unchecked'"
                            class="pointer-events-none block h-5 w-5 rounded-full bg-white shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"></span>
                    </button>
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-6 border-b border-slate-200 flex items-center gap-3 bg-gray-800">
                <div class="w-10 h-10 rounded-lg bg-amber-100 flex items-center justify-center">
                    <lucide-icon [img]="Search" class="w-5 h-5 text-amber-600"></lucide-icon>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-white">SEO</h2>
                    <p class="text-sm text-white">Otimização para motores de busca</p>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Título SEO</label>
                    <input
                        class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        formControlName="seoTitle">
                </div>
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Descrição SEO</label>
                    <textarea
                        class="flex min-h-[80px] w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        rows="3" formControlName="seoDescription"></textarea>
                </div>
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Palavras-chave</label>
                    <input
                        class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        formControlName="seoKeywords" placeholder="palavra1, palavra2, ...">
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-6 border-b border-slate-200 flex items-center gap-3 bg-gray-800">
                <div class="w-10 h-10 rounded-lg bg-emerald-100 flex items-center justify-center">
                    <lucide-icon [img]="MapPin" class="w-5 h-5 text-emerald-600"></lucide-icon>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-white">Localização & Horários</h2>
                    <p class="text-sm text-white">Maps e expediente</p>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Google Maps Embed URL</label>
                    <input
                        class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        formControlName="googleMapsEmbedUrl" placeholder='<iframe src="..."></iframe>'>
                </div>
                <div class="space-y-2">
                    <label class="text-sm font-medium leading-none">Horário de Funcionamento</label>
                    <input
                        class="flex h-10 w-full rounded-md border border-slate-200 bg-white px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-primary/20"
                        formControlName="businessHours">
                </div>
            </div>
        </div>

        <div class="bg-white rounded-xl shadow-sm border border-slate-200 overflow-hidden">
            <div class="p-6 border-b border-slate-200 flex items-center gap-3 bg-gray-800">
                <div class="w-10 h-10 rounded-lg bg-purple-100 flex items-center justify-center">
                    <lucide-icon [img]="Globe" class="w-5 h-5 text-purple-600"></lucide-icon>
                </div>
                <div>
                    <h2 class="text-lg font-semibold text-white">Internacionalização</h2>
                    <p class="text-sm text-white">Moeda e idioma padrão</p>
                </div>
            </div>
            <div class="p-6 space-y-4">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">Moeda</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-500"
                            formControlName="currency">
                    </div>
                    <div class="space-y-2">
                        <label class="text-sm font-medium leading-none">Idioma</label>
                        <input
                            class="flex h-10 w-full rounded-md border border-slate-200 bg-slate-50 px-3 py-2 text-sm text-slate-500"
                            formControlName="locale">
                    </div>
                </div>
            </div>
        </div>

        <div class="flex justify-end pt-6">
            <button (click)="onSubmit()" [disabled]="isSaving() || settingsForm.invalid"
                class="inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-lg text-sm font-medium ring-offset-background transition-all duration-300 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 text-white shadow-soft hover:shadow-hover h-10 px-8 py-2 bg-slate-900 hover:bg-slate-800 cursor-pointer">
                @if (isSaving()) {
                <lucide-icon [img]="Loader2" class="w-4 h-4 animate-spin"></lucide-icon>
                Salvando...
                } @else {
                <lucide-icon [img]="Save" class="w-4 h-4"></lucide-icon>
                Salvar Todas as Configurações
                }
            </button>
        </div>
        }
    </div>
</div>
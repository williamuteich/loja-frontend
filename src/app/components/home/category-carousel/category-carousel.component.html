@if (categories().length > 0) {
<section id="categorias" class="py-12 md:py-20 bg-white">
    <div class="container mx-auto px-4 relative">
        <div class="mb-8 md:mb-12 text-center">
            <span class="inline-block text-pink-600 text-sm font-medium tracking-wider uppercase mb-2">Explore</span>
            <h2 class="text-3xl md:text-4xl font-semibold text-slate-900 mb-3 font-display">Nossas Categorias</h2>
            <p class="text-slate-500 max-w-md mx-auto text-sm md:text-base">Navegue por nossas coleções cuidadosamente
                selecionadas</p>
        </div>

        <div class="carousel-wrapper relative group">
            <button (click)="scroll('left')"
                class="absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 hidden md:flex w-12 h-12 items-center justify-center rounded-full bg-white shadow-lg border border-slate-100 text-pink-600 hover:bg-pink-50 hover:scale-110 transition-all opacity-0 group-hover:opacity-100 cursor-pointer">
                <lucide-icon [img]="ChevronLeft" class="w-6 h-6"></lucide-icon>
            </button>
            <button (click)="scroll('right')"
                class="absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 hidden md:flex w-12 h-12 items-center justify-center rounded-full bg-white shadow-lg border border-slate-100 text-pink-600 hover:bg-pink-50 hover:scale-110 transition-all opacity-0 group-hover:opacity-100 cursor-pointer">
                <lucide-icon [img]="ChevronRight" class="w-6 h-6"></lucide-icon>
            </button>

            <div #scrollContainer
                class="carousel-scroll flex overflow-x-auto gap-2 md:gap-3 pb-6 scroll-smooth no-scrollbar cursor-grab active:cursor-grabbing">
                @for (category of categories(); track category.id; let i = $index) {
                <a [routerLink]="['/produtos']" [queryParams]="{ categoria: category.id }"
                    class="group/card relative flex-none w-20 md:w-28 lg:w-36">
                    <div
                        class="relative aspect-square rounded-2xl overflow-hidden shadow-sm group-hover/card:shadow-lg transition-all duration-500 border border-slate-100 bg-white">
                        @if (category.imageUrl) {
                        <img [ngSrc]="backendUrl + '/' + category.imageUrl" [alt]="category.name" fill
                            class="object-cover group-hover/card:scale-110 transition-transform duration-700"
                            [priority]="i === 0" [loading]="i === 0 ? undefined : 'lazy'" ngSkipSizeCheck>
                        } @else {
                        <div class="absolute inset-0 bg-slate-100 flex items-center justify-center text-slate-400">
                            <span class="text-[8px] uppercase font-medium text-center px-1">Sem imagem</span>
                        </div>
                        }

                        <div
                            class="absolute inset-0 bg-black/25 backdrop-blur-[1px] flex flex-col items-center justify-center p-2 text-center group-hover/card:bg-black/40 group-hover/card:backdrop-blur-xs transition-all duration-500">
                            <h3
                                class="text-white font-bold text-sm md:text-xl lg:text-2xl mb-1 line-clamp-2 capitalize drop-shadow-xl transform group-hover/card:scale-105 transition-transform duration-500 px-2 leading-tight">
                                {{ category.name }}</h3>
                            <span
                                class="text-white/80 text-[7px] md:text-[9px] lg:text-[10px] uppercase tracking-[0.25em] font-bold block drop-shadow-md">
                                {{ category._count.products || 0 }} {{ (category._count.products === 1) ? 'item' :
                                'itens' }}
                            </span>
                        </div>
                    </div>
                </a>
                }
            </div>

        </div>
    </div>
</section>
}